<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>BIND9 DNS智能解析实验 | Yiiong's Blog</title><meta name="author" content="Yiiong"><meta name="copyright" content="Yiiong"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="**BIND（Berkeley Internet Name Domain）**  是全球使用最广泛的 **DNS 服务器软件**，最初由加州大学伯克利分校开发，目前由 **ISC（Internet Systems Consortium）**  维护。  BIND9 让一台服务器可以充当 DNS 解析器（递归）或权威服务器（发布域名解析记录） 目标基于bind9的view功能，实现DNS的智能解析">
<meta property="og:type" content="article">
<meta property="og:title" content="BIND9 DNS智能解析实验">
<meta property="og:url" content="http://blog.yiiong.top/posts/53842.html">
<meta property="og:site_name" content="Yiiong&#39;s Blog">
<meta property="og:description" content="**BIND（Berkeley Internet Name Domain）**  是全球使用最广泛的 **DNS 服务器软件**，最初由加州大学伯克利分校开发，目前由 **ISC（Internet Systems Consortium）**  维护。  BIND9 让一台服务器可以充当 DNS 解析器（递归）或权威服务器（发布域名解析记录） 目标基于bind9的view功能，实现DNS的智能解析">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://blog.yiiong.top/img/ava.jpg">
<meta property="article:published_time" content="2025-12-08T14:00:22.429Z">
<meta property="article:modified_time" content="2025-12-09T12:59:00.251Z">
<meta property="article:author" content="Yiiong">
<meta property="article:tag" content="DNS">
<meta property="article:tag" content="服务器运维">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.yiiong.top/img/ava.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "BIND9 DNS智能解析实验",
  "url": "http://blog.yiiong.top/posts/53842.html",
  "image": "http://blog.yiiong.top/img/ava.jpg",
  "datePublished": "2025-12-08T14:00:22.429Z",
  "dateModified": "2025-12-09T12:59:00.251Z",
  "author": [
    {
      "@type": "Person",
      "name": "Yiiong",
      "url": "http://blog.yiiong.top"
    }
  ]
}</script><link rel="shortcut icon" href="/img/logo.svg"><link rel="canonical" href="http://blog.yiiong.top/posts/53842.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const hour = new Date().getHours()
          const isNight = hour <= 6 || hour >= 24
          if (theme === undefined) isNight ? activateDarkMode() : activateLightMode()
          else theme === 'light' ? activateLightMode() : activateDarkMode()
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":"true`"},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: Yiiong","link":"链接: ","source":"来源: Yiiong's Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'FancyBox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'BIND9 DNS智能解析实验',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/universe.css"><meta name="generator" content="Hexo 8.1.1"></head><body><div id="web_bg" style="background: transparent;"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/ava.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">28</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/tag.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Yiiong's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">BIND9 DNS智能解析实验</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">BIND9 DNS智能解析实验</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-12-08T14:00:22.429Z" title="发表于 2025-12-08 22:00:22">2025-12-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-12-09T12:59:00.251Z" title="更新于 2025-12-09 20:59:00">2025-12-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E7%BB%B4/">服务器运维</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><meta name="referrer" content="no-referrer"/>
**BIND（Berkeley Internet Name Domain）**  是全球使用最广泛的 **DNS 服务器软件**，最初由加州大学伯克利分校开发，目前由 **ISC（Internet Systems Consortium）**  维护。

<p>BIND9 让一台服务器可以充当 DNS 解析器（递归）或权威服务器（发布域名解析记录）</p>
<h1 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h1><p>基于bind9的view功能，实现DNS的智能解析。</p>
<ol>
<li>master和两个slave之间实现主从同步</li>
<li>slave-1和slave-2均提供对<a href="http://www.a.com的解析，其中slave-1解析www至1.1.1.1；slave-2解析www至2.2.2.2">www.a.com的解析，其中slave-1解析www至1.1.1.1；slave-2解析www至2.2.2.2</a></li>
</ol>
<h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><p>容器</p>
<ul>
<li>bind-master：172.28.0.2</li>
<li>bind-slave-1：172.28.0.3</li>
<li>bind-slave-2：172.28.0.4</li>
</ul>
<p>zone：a.com</p>
<p>域名：<a target="_blank" rel="noopener" href="http://www.a.com/">www.a.com</a></p>
<ul>
<li>bind-slave-1视图：1.1.1.1</li>
<li>bind-slave-2视图：2.2.2.2</li>
</ul>
<p>权威NS：ns1.a.com（172.28.0.2）</p>
<p>NS：ns2.a.com（172.28.0.3、172.28.0.4）</p>
<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@RainYun-8iZCjURn:/home/bind9-2# tree .</span><br><span class="line">.</span><br><span class="line">├── docker-compose.yml</span><br><span class="line">├── master</span><br><span class="line">│   ├── config</span><br><span class="line">│   │   ├── named.conf</span><br><span class="line">│   │   └── rndc.key</span><br><span class="line">│   └── zones</span><br><span class="line">│       ├── a.com.zone.1</span><br><span class="line">│       ├── a.com.zone.2</span><br><span class="line">│       └── named.log</span><br><span class="line">├── slave-1</span><br><span class="line">│   ├── config</span><br><span class="line">│   │   └── named.conf</span><br><span class="line">│   └── zones</span><br><span class="line">└── slave-2</span><br><span class="line">    ├── config</span><br><span class="line">    │   └── named.conf</span><br><span class="line">    └── zones</span><br></pre></td></tr></table></figure>

<h2 id="docker-compose-yml"><a href="#docker-compose-yml" class="headerlink" title="docker-compose.yml"></a>docker-compose.yml</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">version: &quot;3.9&quot;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  bind-master:</span><br><span class="line">    image: internetsystemsconsortium/bind9:9.18</span><br><span class="line">    container_name: bind-master</span><br><span class="line">    restart: always</span><br><span class="line">    entrypoint: /bin/sh</span><br><span class="line">    tty: true</span><br><span class="line">    stdin_open: true</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;253:53/tcp&quot;</span><br><span class="line">      - &quot;253:53/udp&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - ./master/config:/etc/bind</span><br><span class="line">      - ./master/zones:/var/lib/bind</span><br><span class="line">    environment:</span><br><span class="line">      - TZ=Asia/Shanghai</span><br><span class="line">    networks:</span><br><span class="line">      bindnet:</span><br><span class="line">        ipv4_address: 172.28.0.2</span><br><span class="line"></span><br><span class="line">  bind-slave-1:</span><br><span class="line">    image: internetsystemsconsortium/bind9:9.18</span><br><span class="line">    container_name: bind-slave-1</span><br><span class="line">    restart: always</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;153:53/tcp&quot;</span><br><span class="line">      - &quot;153:53/udp&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - ./slave-1/config:/etc/bind</span><br><span class="line">    environment:</span><br><span class="line">      - TZ=Asia/Shanghai</span><br><span class="line">    depends_on:</span><br><span class="line">      - bind-master</span><br><span class="line">    networks:</span><br><span class="line">      bindnet:</span><br><span class="line">        ipv4_address: 172.28.0.3</span><br><span class="line"></span><br><span class="line">  bind-slave-2:</span><br><span class="line">    image: internetsystemsconsortium/bind9:9.18</span><br><span class="line">    container_name: bind-slave-2</span><br><span class="line">    restart: always</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;353:53/tcp&quot;</span><br><span class="line">      - &quot;353:53/udp&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - ./slave-2/config:/etc/bind</span><br><span class="line">    environment:</span><br><span class="line">      - TZ=Asia/Shanghai</span><br><span class="line">    depends_on:</span><br><span class="line">      - bind-master</span><br><span class="line">    networks:</span><br><span class="line">      bindnet:</span><br><span class="line">        ipv4_address: 172.28.0.4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  bindnet:</span><br><span class="line">    driver: bridge</span><br><span class="line">    ipam:</span><br><span class="line">      config:</span><br><span class="line">        - subnet: 172.28.0.0/16</span><br></pre></td></tr></table></figure>

<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><h2 id="master"><a href="#master" class="headerlink" title="master"></a>master</h2><h3 id="添加zone，配置主从"><a href="#添加zone，配置主从" class="headerlink" title="添加zone，配置主从"></a>添加zone，配置主从</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">options &#123;</span><br><span class="line">	// bind工作目录，所有zone文件、日志文件都会在这个目录下找</span><br><span class="line">    directory &quot;/var/lib/bind&quot;;</span><br><span class="line">	</span><br><span class="line">	// bind监听的 ipv4 地址</span><br><span class="line">    listen-on &#123; any; &#125;;</span><br><span class="line">    listen-on-v6 &#123; any; &#125;;</span><br><span class="line"></span><br><span class="line">	// 指定允许哪些客户端向该服务器发起查询（Query），对于递归DNS不要使用any</span><br><span class="line">    allow-query &#123; any; &#125;;</span><br><span class="line">	</span><br><span class="line">	// 是否允许递归查询</span><br><span class="line">    recursion no;</span><br><span class="line">	</span><br><span class="line">	// 控制是否启用DNSSEC签名验证，递归服务器时适合开启，权威一般不用</span><br><span class="line">    dnssec-validation no;</span><br><span class="line">    </span><br><span class="line">	// 隐藏bind版本号</span><br><span class="line">	version &quot;hidden&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 定义 IP 源</span><br><span class="line">acl &quot;slave1&quot; &#123; 172.28.0.3; &#125;;</span><br><span class="line">acl &quot;slave2&quot; &#123; 172.28.0.4; &#125;;</span><br><span class="line"></span><br><span class="line">// 定义视图</span><br><span class="line">view &quot;view1&quot; &#123;</span><br><span class="line">	// 允许访问zone的IP来源</span><br><span class="line">    match-clients &#123; slave1; &#125;;</span><br><span class="line">	</span><br><span class="line">    zone &quot;a.com&quot; &#123;</span><br><span class="line">        type master;</span><br><span class="line">		</span><br><span class="line">		// zone file存储路径</span><br><span class="line">        file &quot;/var/lib/bind/a.com.zone.1&quot;;</span><br><span class="line">        </span><br><span class="line">		// 允许区域文件传输的IP地址</span><br><span class="line">		allow-transfer &#123; 172.28.0.3; &#125;;</span><br><span class="line">		</span><br><span class="line">		// zone file变更后主动通知 slave</span><br><span class="line">        also-notify &#123; 172.28.0.3; &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">view &quot;view2&quot; &#123;</span><br><span class="line">    match-clients &#123; slave2; &#125;;</span><br><span class="line"></span><br><span class="line">    zone &quot;a.com&quot; &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;/var/lib/bind/a.com.zone.2&quot;;</span><br><span class="line">        allow-transfer &#123; 172.28.0.4; &#125;;</span><br><span class="line">        also-notify &#123; 172.28.0.4; &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="添加bind-slave-1视图的zone-file"><a href="#添加bind-slave-1视图的zone-file" class="headerlink" title="添加bind-slave-1视图的zone file"></a>添加bind-slave-1视图的zone file</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 添加记录</span><br><span class="line">;</span><br><span class="line">; BIND Zone File</span><br><span class="line">;</span><br><span class="line">; $TTL 5 表示该DNS表项在client的缓存时间为5s</span><br><span class="line">;</span><br><span class="line">; Refresh 表示slave与master同步的时间</span><br><span class="line">; Retry    表示slave与master断连后，多久进行重连检查</span><br><span class="line">; Expire    表示slave与master断连多久后，该区域失效</span><br><span class="line">; Negative Cache TTL 表示查询的数据不存在时，这个否定的回答在其他服务器的缓存时间</span><br><span class="line">; @代表当前$ORIGIN（zone的根，通常是zone文件声明的域名，例如a.com）</span><br><span class="line">; IN 表示 Internet class</span><br><span class="line">; SOA（Start Of Authority）记录zone的元数据</span><br><span class="line">; Serial很关键，用来判定zone是否更新（slave只在master的serial增大时拉取更新），通常为日期风格YYYYMMDDNN</span><br><span class="line">; NS声明负责该zone的权威name server</span><br><span class="line">; 末尾的.表示完整域名（绝对名称），如果没有末尾点会被当作相对名称，追加当前 $ORIGIN：ns1 → ns1.a.com.</span><br><span class="line">; 常见的其他记录：CNAME、MX（邮箱），TXT（文本记录）、SRV（服务定位记录）、PTR（反向解析）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$TTL 1H</span><br><span class="line">@   IN  SOA ns1.a.com. admin.a.com. (</span><br><span class="line">        2025102304 ; Serial</span><br><span class="line">        1H</span><br><span class="line">        15M</span><br><span class="line">        1W</span><br><span class="line">        1H )</span><br><span class="line"></span><br><span class="line">    IN  NS ns1.a.com.</span><br><span class="line">    IN  NS ns2.a.com.</span><br><span class="line"></span><br><span class="line">ns1 IN  A 172.28.0.2</span><br><span class="line">ns2 IN  A 172.28.0.3</span><br><span class="line"></span><br><span class="line">; slave-1 视图www对应 1.1.1.1</span><br><span class="line">www IN  A 1.1.1.1</span><br></pre></td></tr></table></figure>

<h3 id="添加bind-slave-2视图的zone-file"><a href="#添加bind-slave-2视图的zone-file" class="headerlink" title="添加bind-slave-2视图的zone file"></a>添加bind-slave-2视图的zone file</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$TTL 1H</span><br><span class="line">@   IN  SOA ns1.a.com. admin.a.com. (</span><br><span class="line">        2025102305 ; Serial</span><br><span class="line">        1H</span><br><span class="line">        15M</span><br><span class="line">        1W</span><br><span class="line">        1H )</span><br><span class="line"></span><br><span class="line">    IN  NS ns1.a.com.</span><br><span class="line">    IN  NS ns2.a.com.</span><br><span class="line"></span><br><span class="line">ns1 IN  A 172.28.0.2</span><br><span class="line">ns2 IN  A 172.28.0.4</span><br><span class="line">www IN  A 2.2.2.2</span><br></pre></td></tr></table></figure>

<h2 id="slave"><a href="#slave" class="headerlink" title="slave"></a>slave</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">options &#123;</span><br><span class="line">    directory &quot;/var/cache/bind&quot;;</span><br><span class="line"></span><br><span class="line">    listen-on &#123; any; &#125;;</span><br><span class="line">    listen-on-v6 &#123; any; &#125;;</span><br><span class="line"></span><br><span class="line">    allow-query &#123; any; &#125;;</span><br><span class="line">    recursion no;</span><br><span class="line"></span><br><span class="line">    dnssec-validation no;</span><br><span class="line">    version &quot;hidden&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone &quot;a.com&quot; &#123;</span><br><span class="line">    type slave;</span><br><span class="line">    masters &#123; 172.28.0.2; &#125;;</span><br><span class="line">    file &quot;slaves/a.com.zone&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">logging &#123;</span><br><span class="line">    channel default_log &#123;</span><br><span class="line">        file &quot;/var/cache/bind/named.log&quot; versions 3 size 5m;</span><br><span class="line">        severity info;</span><br><span class="line">        print-time yes;</span><br><span class="line">    &#125;;</span><br><span class="line">    category default &#123; default_log; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h1><h2 id="slave-1解析"><a href="#slave-1解析" class="headerlink" title="slave-1解析"></a>slave-1解析</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dig @172.28.0.3 www.a.com</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/beatrueman/images/raw/master/20251208212412703.png" alt="c064f4f7cc4b84ed44ee0d7b6159bfa9"></p>
<h2 id="slave-2解析"><a href="#slave-2解析" class="headerlink" title="slave-2解析"></a>slave-2解析</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dig @172.28.0.4 www.a.com</span><br></pre></td></tr></table></figure>

<p>可以看到解析至2.2.2.2</p>
<p><img src="https://gitee.com/beatrueman/images/raw/master/20251208212412704.png" alt="3372cd82c7940276f0af0816f6f7f8f0"></p>
<h1 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h1><h2 id="容器重启"><a href="#容器重启" class="headerlink" title="容器重启"></a>容器重启</h2><p>实验采用<code>internetsystemsconsortium/bind9:9.18</code>​镜像，该镜像的<code>entrypoint</code>​为</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/usr/sbin/named -u bind -f -c /etc/bind/named.conf -L /var/log/bind/default.log</span><br></pre></td></tr></table></figure>

<p>当配置文件<code>named.conf</code>​语法出现问题或文件权限不正确时，容器会重启，且日志不会输出到标准输出上，也就是说通过docker log是看不到日志的。</p>
<p>‍</p>
<p>这时我们可以修改<code>entrypoint</code>​为<code>/bin/sh</code>​，手动进入容器进行调试，通过named命令来启动服务。</p>
<h2 id="配置文件权限不正确"><a href="#配置文件权限不正确" class="headerlink" title="配置文件权限不正确"></a>配置文件权限不正确</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">22-Oct-2025 12:37:11.678 ---------------------------------------------------- 22-Oct-2025 12:37:11.678 adjusted limit on open files from 1073741816 to 1048576</span><br><span class="line">22-Oct-2025 12:37:11.678 found 2 CPUs, using 2 worker threads</span><br><span class="line">22-Oct-2025 12:37:11.678 using 2 UDP listeners per interface</span><br><span class="line">22-Oct-2025 12:37:11.682 DNSSEC algorithms: RSASHA1 NSEC3RSASHA1 RSASHA256 RSASHA512 ECDSAP256SHA256 ECDSAP384SHA384 ED25519 ED448</span><br><span class="line">22-Oct-2025 12:37:11.682 DS algorithms: SHA-1 SHA-256 SHA-384</span><br><span class="line">22-Oct-2025 12:37:11.682 HMAC algorithms: HMAC-MD5 HMAC-SHA1 HMAC-SHA224 HMAC-SHA256 HMAC-SHA384 HMAC-SHA512</span><br><span class="line">22-Oct-2025 12:37:11.682 TKEY mode 2 support (Diffie-Hellman): yes</span><br><span class="line">22-Oct-2025 12:37:11.682 TKEY mode 3 support (GSS-API): yes</span><br><span class="line">22-Oct-2025 12:37:11.682 the initial working directory is &#x27;/&#x27;</span><br><span class="line">22-Oct-2025 12:37:11.682 loading configuration from &#x27;/etc/bind/named.conf&#x27; 22-Oct-2025 12:37:11.686 directory &#x27;/var/lib/bind&#x27; is not writable</span><br><span class="line">22-Oct-2025 12:37:11.686 /etc/bind/named.conf:2: parsing failed: permission denied</span><br><span class="line">22-Oct-2025 12:37:11.686 loading configuration: permission denied</span><br><span class="line">22-Oct-2025 12:37:11.686 exiting (due to fatal error)</span><br></pre></td></tr></table></figure>

<p>调试用，最直接的方式是给777</p>
<p>ps：给过755，而且文件权限属于bind:bind，我在测试时还是没有写权限。</p>
<h2 id="rndc-reload密钥问题"><a href="#rndc-reload密钥问题" class="headerlink" title="rndc reload密钥问题"></a>rndc reload密钥问题</h2><p><code>rndc</code>​ 是 BIND 的远程控制工具（Remote Name Daemon Control）</p>
<p>可以用来让正在运行的 <code>named</code>​：</p>
<ul>
<li>重新加载配置文件或 zone (<code>rndc reload</code>​)</li>
<li>重新签名 DNSSEC</li>
<li>清理缓存</li>
<li>停止&#x2F;启动服务等</li>
</ul>
<p>‍</p>
<p><strong>当修改zone file（增加或删除解析记录）、SOA序列号（Serial）需要自增1</strong></p>
<p><strong>然后使用rndc reload刷新配置</strong></p>
<p>如果遇到</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/ # rndc reload a.com </span><br><span class="line">rndc: neither /etc/bind/rndc.conf nor /etc/bind/rndc.key was found</span><br></pre></td></tr></table></figure>

<p>需要添加<code>rndc.key</code>​</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /etc/bind</span><br><span class="line">rndc-confgen -a -b 512</span><br></pre></td></tr></table></figure>

<p>然后对生成的<code>rndc.key</code>​赋予权限</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chown bind:bind /etc/bind/rndc.key</span><br><span class="line">chmod 600 /etc/bind/rndc.key</span><br></pre></td></tr></table></figure>

<p>理论赋上面的权限，但是测试时经常提示无写入权限，所以就直接777了</p>
<p>‍</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://blog.yiiong.top">Yiiong</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://blog.yiiong.top/posts/53842.html">http://blog.yiiong.top/posts/53842.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://blog.yiiong.top" target="_blank">Yiiong's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E7%BB%B4/">服务器运维</a><a class="post-meta__tags" href="/tags/DNS/">DNS</a></div><div class="post-share"><div class="social-share" data-image="/img/ava.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/2684.html" title="EasyBanner"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">EasyBanner</div></div><div class="info-2"><div class="info-item-1">EasyBanner是一个自动化封禁IP机器人，实现封禁操作的白屏化。</div></div></div></a><a class="pagination-related" href="/posts/49152.html" title="2022红岩杯WriteUp"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">2022红岩杯WriteUp</div></div><div class="info-2"><div class="info-item-1"> # PWN  一口一个flag题目：nc一下下  idea：根据提示，nc是linux的命令，所以本题需要在linux环境求解  step：打开Linux的终端，nc所给的端口输入：nc 172.20.14.18 31751得到答案：redrock&#123;Ech0eCHo-IWaNtF10g_&#125;   猫猫flag题目：nc二下下  idea:本题与上题类似  step:nc端口后无回显，继续输入指令ls后出现flag然后cat flag得到答案:redrock&#123;SEhLlCAT_IWaNtf1a9_&#125;   Web你是哪里的题目：https://96a84eec-4f7b-45a6-a5bb-224f1064604e.ctf.redrock.team/  idea:进入第一层网页，显示（you must be from https://redrock.team）没什么破绽，按下F12,F5刷新一下，点进网页显示（A word in the http message header is wrong,do you know?），按下F12并刷新依然没...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/18658.html" title="Redis主从同步实验"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-08</div><div class="info-item-2">Redis主从同步实验</div></div><div class="info-2"><div class="info-item-1"> # 需求   A：master，不加密（普通端口 6379） B：slave，从 A 同步，不加密（端口 16379），同时监听 TLS 加密端口 16380 C：slave，从 B 同步，通过 TLS（端口 16380）  部署生成自签名TLS证书 使用openssl生成自签名证书mkdir -p certs &amp;&amp; cd certs# 创建 CAopenssl genrsa -out ca.key 4096openssl req -x509 -new -nodes -key ca.key -sha256 -days 3650 -out ca.crt -subj &quot;/CN=Redis-CA&quot;# 创建 server key 和证书签名请求（CSR）openssl genrsa -out redis.key 2048openssl req -new -key redis.key -out redis.csr -subj &quot;/CN=redis-server&quot;# 使用 CA 签发 server 证书openssl x509 -re...</div></div></div></a><a class="pagination-related" href="/posts/22140.html" title="运维常用工具"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-08</div><div class="info-item-2">运维常用工具</div></div><div class="info-2"><div class="info-item-1"> ## Harbor   Harbor (goharbor.io)  尽管Docker官方提供了公共的镜像仓库DockerHub，但从安全性和稳定性等方面考虑，部署私有镜像仓库是非常有必要的。Harbor是一个由VMware公司开源的企业级的Docker Registry管理项目，是我们搭建私有镜像仓库的不二之选。 整体架构 如上图所示是 Harbor 2.0 的架构图，从上到下可分为代理层、功能层和数据层。  代理层：代理层实质上是一个 Nginx 反向代理，负责接收不同类型的客户端请求，包括浏览器、用户脚本、Docker 等，并根据请求类型和 URI 转发给不同的后端服务进行处理。 功能层： Portal：是一个基于 Argular 的前端应用，提供 Harbor 用户访问的界面。 Core：是 Harbor 中的核心组件，封装了 Harbor 绝大部分的业务逻辑。 JobService：异步任务组件，负责 Harbor 中很多比较耗时的功能，比如 Artifact 复制、扫描、垃圾回收等。 Docker Distribution：Harbor 通过 Distribution...</div></div></div></a><a class="pagination-related" href="/posts/27345.html" title="iManager-您的私人镜像管家"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-08</div><div class="info-item-2">iManager-您的私人镜像管家</div></div><div class="info-2"><div class="info-item-1"> # iManager-您的私人镜像管家  尽管Docker官方提供了公共的镜像仓库DockerHub，但从安全性和稳定性等方面考虑，部署私有镜像仓库是非常有必要的。Harbor是一个由VMware公司开源的企业级的Docker Registry管理项目，是我们搭建私有镜像仓库的不二之选。 而自动化一直是运维工作中的重中之重。 Yiiong希望你能够将Harbor与飞书机器人联系起来，方便管理员统一管理镜像，使管理员随时都可以知晓仓库镜像的变动信息，管理员动动手指就可以对仓库里的镜像进行操作等。 前置准备 建议使用服务器搭建Harbor仓库，并且配置好https 申请一个飞书企业账号 可能需要一个域名？  任务友善的用户交互用户肯定需要知道你的机器人都可以干些什么事情吧 用户向机器人发送帮助，机器人返回可以实现的功能列表 当用户发送了一些乱七八糟的信息时，机器人需要做出一定的回复，比如我听不懂捏 Level 0 通知当镜像状态发生改变时，机器人向管理员发起通知 通知内容包括：  镜像状态（Push or Pull or Delete） 镜像名称以及标签 镜像状态改变的日期 镜像状...</div></div></div></a><a class="pagination-related" href="/posts/63036.html" title="Gitlab CICD学习记录"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-08</div><div class="info-item-2">Gitlab CICD学习记录</div></div><div class="info-2"><div class="info-item-1"> # Gitlab CICD学习记录  用Flask在K8s集群编写后端项目编写app.py编写一个最简单的后端项目，命名为app.py，返回hello world! from flask import Flaskapp = Flask(__name__)@app.route(&#x27;/&#x27;)def hello():    return &quot;hello world!&quot;if __name__ == &#x27;__main__&#x27;:    app.run(host=&#x27;0.0.0.0&#x27;, port=8080)  用pipreqs导出依赖文件pip3 install pipreqs  pipreqs . --encoding=utf8 --force   构建Docker镜像编写dockerfile FROM python:3.9WORKDIR /appCOPY requirements.txt .RUN pip install --no-cache-dir -r requirements.txtCOPY . .CMD [&qu...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/ava.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Yiiong</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">28</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Beatrueman"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:yiiong@redrock.team" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Study in Redrock SRE!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87"><span class="toc-number">1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83"><span class="toc-number">2.</span> <span class="toc-text">环境</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">2.1.</span> <span class="toc-text">目录结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#docker-compose-yml"><span class="toc-number">2.2.</span> <span class="toc-text">docker-compose.yml</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">3.</span> <span class="toc-text">配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#master"><span class="toc-number">3.1.</span> <span class="toc-text">master</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0zone%EF%BC%8C%E9%85%8D%E7%BD%AE%E4%B8%BB%E4%BB%8E"><span class="toc-number">3.1.1.</span> <span class="toc-text">添加zone，配置主从</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0bind-slave-1%E8%A7%86%E5%9B%BE%E7%9A%84zone-file"><span class="toc-number">3.1.2.</span> <span class="toc-text">添加bind-slave-1视图的zone file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0bind-slave-2%E8%A7%86%E5%9B%BE%E7%9A%84zone-file"><span class="toc-number">3.1.3.</span> <span class="toc-text">添加bind-slave-2视图的zone file</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#slave"><span class="toc-number">3.2.</span> <span class="toc-text">slave</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81"><span class="toc-number">4.</span> <span class="toc-text">验证</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#slave-1%E8%A7%A3%E6%9E%90"><span class="toc-number">4.1.</span> <span class="toc-text">slave-1解析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#slave-2%E8%A7%A3%E6%9E%90"><span class="toc-number">4.2.</span> <span class="toc-text">slave-2解析</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">5.</span> <span class="toc-text">注意点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E9%87%8D%E5%90%AF"><span class="toc-number">5.1.</span> <span class="toc-text">容器重启</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E4%B8%8D%E6%AD%A3%E7%A1%AE"><span class="toc-number">5.2.</span> <span class="toc-text">配置文件权限不正确</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rndc-reload%E5%AF%86%E9%92%A5%E9%97%AE%E9%A2%98"><span class="toc-number">5.3.</span> <span class="toc-text">rndc reload密钥问题</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/52501.html" title="MariaDB Galera错误的更改配置方式导致集群无法拉起">MariaDB Galera错误的更改配置方式导致集群无法拉起</a><time datetime="2025-12-22T13:07:45.035Z" title="发表于 2025-12-22 21:07:45">2025-12-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/52500.html" title="MariaDB Galera容器集群恢复方法">MariaDB Galera容器集群恢复方法</a><time datetime="2025-12-22T13:07:45.014Z" title="发表于 2025-12-22 21:07:45">2025-12-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/18658.html" title="Redis主从同步实验">Redis主从同步实验</a><time datetime="2025-12-08T14:55:52.970Z" title="发表于 2025-12-08 22:55:52">2025-12-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/22140.html" title="运维常用工具">运维常用工具</a><time datetime="2025-12-08T14:00:22.525Z" title="发表于 2025-12-08 22:00:22">2025-12-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/36066.html" title="算法记录">算法记录</a><time datetime="2025-12-08T14:00:22.521Z" title="发表于 2025-12-08 22:00:22">2025-12-08</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent;"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By Yiiong</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.2</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.2"></script><script src="/js/main.js?v=5.5.2"></script><script src="/"></script><div class="js-pjax"></div><canvas id="universe"></canvas><script src="/js/universe.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script async data-pjax src="/"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.2"></script></div></div></body></html>